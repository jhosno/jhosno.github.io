<!-- Related Posts -->
<section class="px-6 py-20 bg-gray-900">
  <div class="container mx-auto max-w-6xl">
    <h2 class="text-4xl font-black mb-12 text-center">
      <span class="text-golden">ARTÍCULOS</span>
      <span class="text-salmon">RELACIONADOS</span>
    </h2>

    <div class="grid md:grid-cols-3 gap-8">
      {% assign color_classes = "
      golden:border-golden bg-golden text-golden from-golden , 
      purple:border-purple bg-purple text-purple from-purple , 
      salmon:border-salmon bg-salmon text-salmon from-salmon 
      " | split: "," %}
      {% assign tag = page.tag %} 
      {% assign related_posts = site.tags[tag] %} 
      {% if related_posts.size > 0%} 
        {% for post in related_posts limit:4 %}
          {% if post.url != page.url %}
            {% assign index = forloop.index0 | modulo: 3 %}
            {% assign color_set = color_classes[index] | split: ":" %} 
            {% assign color_name = color_set[0] %} 
            {% assign classes = color_set[1] | split: " " %}     
              <article
                class="bg-black border-4 {{classes[0]}} overflow-hidden hover:golden-border transition-all transform hover:-translate-y-2"
              >
                <div
                  class="h-48 bg-gradient-to-br {{classes[3]}} to-black flex items-center justify-center"
                >
                  <i data-lucide="palette" class="w-16 h-16 text-black"></i>
                </div>
                <div class="p-6">
                  {% for category in post.categories %}
                  <span class="{{classes[1]}} text-black px-3 py-1 text-xs font-bold uppercase"
                  >{{category}}</span
                >
                
                  {%endfor%}
                
                  <h3 class="text-xl font-bold my-3 {{classes[2]}}">{{post.title}}</h3>
                  <p class="text-gray-400 text-sm mb-4">
                    {{post.extract}}
                  </p>
                  <a  href="{{ site.url }}{{ post.url }}"
                    class="{{classes[2]}} font-bold hover:{{classes[2]}} transition-colors flex items-center gap-1"
                  >
                    LEER MÁS
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                  </a>
                </div>
              </article>
          {% endif %}
       {% endfor %} 
      {% else %}
        {% for post in site.posts limit:4 %}
          {% if post.url != page.url %}
            {% assign index = forloop.index0 | modulo: 3 %}
            {% assign color_set = color_classes[index] | split: ":" %} 
            {% assign color_name = color_set[0] %} 
            {% assign classes = color_set[1] | split: " " %}  
            <article
              class="bg-black border-4 {{classes[0]}} overflow-hidden hover:golden-border transition-all transform hover:-translate-y-2"
            >
              <div
                class="h-48 bg-gradient-to-br {{classes[3]}} to-black flex items-center justify-center"
              >
                <i data-lucide="palette" class="w-16 h-16 text-black"></i>
              </div>
              <div class="p-6">
                {% for category in post.categories %}
                <span class="{{classes[1]}} text-black px-3 py-1 text-xs font-bold uppercase"
                >{{category}}</span
              >
              
                {%endfor%}
              
                <h3 class="text-xl font-bold my-3 {{classes[2]}}">{{post.title}}</h3>
                <p class="text-gray-400 text-sm mb-4">
                  {{post.extract}}
                </p>
                <a  href="{{ site.url }}{{ post.url }}"
                  class="{{classes[2]}} font-bold hover:{{classes[2]}} transition-colors flex items-center gap-1"
                >
                  LEER MÁS
                  <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </a>
              </div>
            </article>
          {% endif %}
        {% endfor %} 
      {% endif %}
    </div>
  </div>
</section>
